Case 1: Nesting, but no interleaving

[31mBEGIN transaction 7812378112387[0m
[32mfoo 2[0m
[32mbar 44 x y[0m
[34mEND transaction 7812378112387[0m
[31mBEGIN transaction 111781237811[0m
[32mfoo 88[0m
[31mBEGIN transaction 55[0m
[32mbar 33 y y[0m
[32mfoo 55[0m
[34mEND transaction 55[0m
[34mEND transaction 111781237811[0m

[32mCase 1a[0m: Deeply nested transactions with no interleaving or invalid entries

[31mBEGIN transaction 7812378112387[0m
[32mfoo 2[0m
[32mbar 44 x y[0m
[34mEND transaction 7812378112387[0m
[31mBEGIN transaction 111781237811[0m
[32mfoo 88[0m
[31mBEGIN transaction 55[0m
[32mbar 33 y y[0m
[31mBEGIN transaction 1213[0m
[32mfoo 392[0m
[32mbar 20 w f[0m
[31mBEGIN transaction 15321[0m
[32mfoo 54[0m
[32mbar 12 f f[0m 
[31mBEGIN transaction 132145[0m
[32mfoo 95[0m
[31mBEGIN transaction 5531[0m
[32mbar 23 g s[0m
[34mEND transaction 5531[0m
[32mbar 68 o s[0m
[32mfoo 75[0m
[34mEND transaction 132145[0m
[34mEND transaction 15321[0m
[32mbar 90 p a[0m
[31mBEGIN transaction 12521[0m
[32mbar 23 g s[0m
[34mEND transaction 12521[0m
[34mEND transaction 1213[0m
[32mfoo 55[0m
[34mEND transaction 55[0m
[34mEND transaction 111781237811[0m

[32mCase 2[0m: Transactions can also be interleaved with one another.

[31mBEGIN transaction 7812378112387[0m
[32mfoo 2[0m
[32mbar 44 x y[0m
[34mEND transaction 7812378112387[0m
[31mBEGIN transaction 111781237811[0m
[32mfoo 88[0m
[31mBEGIN transaction 55[0m
[32mbar 33 y y[0m
[32mfoo 55[0m
[34mEND transaction 111781237811[0m
[34mEND transaction 55[0m


[32mCase 3[0m: It's also possible that a server crashes before finishing a transaction.

[31mBEGIN transaction 7812378112387[0m
[32mfoo 2[0m
[32mbar 44 x y[0m
[34mEND transaction 7812378112387[0m
[31mBEGIN transaction 111781237811[0m
[32mfoo 88[0m
[31mBEGIN transaction 55[0m
[32mbar 33 y y[0m
[32mfoo 55[0m
[34mEND transaction 55[0m

[31mBEGIN transaction 7812378112387[0m
[32mfoo 2[0m
[32mbar 44 x y[0m
[34mEND transaction 7812378112387[0m
[31mBEGIN transaction 55[0m
[32mfoo 88[0m
[31mBEGIN transaction 111781237811[0m
[32mbar 33 y y[0m
[32mfoo 55[0m
[34mEND transaction 55[0m

[32mCase 4[0m: Missing "BEGIN" (invalid)

[32mfoo 2[0m
[32mbar 44 x y[0m
[34mEND transaction 7812378112387[0m
[31mBEGIN transaction 111781237811[0m
[32mfoo 88[0m
[31mBEGIN transaction 55[0m
[32mbar 33 y y[0m
[32mfoo 55[0m
[34mEND transaction 55[0m
[34mEND transaction 111781237811[0m

[32mCase 5[0m: Deeply nested with invalid, valid, and incomplete transactions

[31mBEGIN transaction 7812378112387[0m
[32mfoo 2[0m
[32mbar 44 x y[0m
[31mBEGIN transaction 55[0m
[32mbar 33 y y[0m
[31mBEGIN transaction 1213[0m
[32mfoo 392[0m
[32mbar 20 w f[0m
[31mBEGIN transaction 15321[0m
[32mfoo 54[0m
[32mbar 12 f f[0m
[31mBEGIN transaction 132145[0m
[32mfoo 95[0m
[31mBEGIN transaction 5531[0m
[32mbar 23 g s[0m
[34mEND transaction 5531[0m
[32mbar 68 o s[0m
[32mfoo 75[0m
[31mBEGIN transaction 8141[0m
[32mfoo 39[0m
[31mBEGIN transaction 5190[0m
[32mbar 90 p a[0m
[34mEND transaction 8141[0m
[34mEND transaction 1213[0m
[32mfoo 55[0m
[31mBEGIN transaction 4151[0m
[34mEND transaction 7812378112387[0m
[32mbar 12 a b[0m
[34mEND transaction 55[0m
[32mfoo 32[0m
[34mEND transaction 5190[0m

